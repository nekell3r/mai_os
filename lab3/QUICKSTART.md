# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç Lab3

## –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞

### PowerShell:

```powershell
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
mkdir build -Force; cd build; cmake .. -G Ninja; ninja; cd src; copy ..\..\test_numbers.txt .; echo test_numbers.txt | .\parent.exe
```

## –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### 1. –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```powershell
cd D:\programming_projects\mai_os\lab3
mkdir build
cd build
cmake .. -G Ninja
ninja
```

### 2. –ó–∞–ø—É—Å–∫

```powershell
cd src
copy ..\..\test_numbers.txt .
echo test_numbers.txt | .\parent.exe
```

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

```
–í–≤–µ–¥–∏—Ç–µ –∏–º—è —Ñ–∞–π–ª–∞: test_numbers.txt
16-00-21MSG parent –ß–∏—Ç–∞—é —Ñ–∞–π–ª 'test_numbers.txt'
16-00-21MSG parent Shared memory –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
16-00-21MSG parent –°–æ–±—ã—Ç–∏—è –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã
16-00-21MSG parent –î–æ—á–µ—Ä–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—â–µ–Ω
16-00-21MSG parent –û—Ç–ø—Ä–∞–≤–ª—è—é —á–∏—Å–ª–æ 15 –¥–æ—á–µ—Ä–Ω–µ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É
16-00-21MSG parent –ü–æ–ª—É—á–µ–Ω–æ —Å–æ—Å—Ç–∞–≤–Ω–æ–µ —á–∏—Å–ª–æ 15 –æ—Ç –¥–æ—á–µ—Ä–Ω–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
16-00-21MSG parent –û—Ç–ø—Ä–∞–≤–ª—è—é —á–∏—Å–ª–æ 20 –¥–æ—á–µ—Ä–Ω–µ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É
16-00-21MSG parent –ü–æ–ª—É—á–µ–Ω–æ —Å–æ—Å—Ç–∞–≤–Ω–æ–µ —á–∏—Å–ª–æ 20 –æ—Ç –¥–æ—á–µ—Ä–Ω–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
16-00-21MSG parent –û—Ç–ø—Ä–∞–≤–ª—è—é —á–∏—Å–ª–æ 8 –¥–æ—á–µ—Ä–Ω–µ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É
16-00-21MSG parent –ü–æ–ª—É—á–µ–Ω–æ —Å–æ—Å—Ç–∞–≤–Ω–æ–µ —á–∏—Å–ª–æ 8 –æ—Ç –¥–æ—á–µ—Ä–Ω–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
16-00-21MSG parent –û—Ç–ø—Ä–∞–≤–ª—è—é —á–∏—Å–ª–æ 12 –¥–æ—á–µ—Ä–Ω–µ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É
16-00-21MSG parent –ü–æ–ª—É—á–µ–Ω–æ —Å–æ—Å—Ç–∞–≤–Ω–æ–µ —á–∏—Å–ª–æ 12 –æ—Ç –¥–æ—á–µ—Ä–Ω–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
16-00-21MSG parent –û—Ç–ø—Ä–∞–≤–ª—è—é —á–∏—Å–ª–æ 7 –¥–æ—á–µ—Ä–Ω–µ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É
16-00-21MSG parent –ü–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—Ç –¥–æ—á–µ—Ä–Ω–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
16-00-21MSG parent –î–æ—á–µ—Ä–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –∫–æ–¥–æ–º 0
16-00-21MSG parent –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã
```

## –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

```powershell
cd D:\programming_projects\mai_os\lab3\build
ninja
cd src
echo test_numbers.txt | .\parent.exe
```

## –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤–æ–∏—Ö —Ç–µ—Å—Ç–æ–≤

```powershell
# –¢–µ—Å—Ç —Å –ø—Ä–æ—Å—Ç—ã–º —á–∏—Å–ª–æ–º
echo 4 > test1.txt
echo 9 >> test1.txt
echo 11 >> test1.txt

echo test1.txt | .\parent.exe

# –¢–µ—Å—Ç —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º
echo 10 > test2.txt
echo -5 >> test2.txt

echo test2.txt | .\parent.exe

# –¢–µ—Å—Ç —Ç–æ–ª—å–∫–æ —Å —Å–æ—Å—Ç–∞–≤–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏
echo 4 > test3.txt
echo 6 >> test3.txt
echo 8 >> test3.txt
echo 9 >> test3.txt
echo 10 >> test3.txt

echo test3.txt | .\parent.exe
```

## –ü—Ä–æ–±–ª–µ–º—ã?

### Ninja –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

```powershell
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Visual Studio
cmake .. -G "Visual Studio 17 2022"
cmake --build . --config Release
cd src\Release
copy ..\..\..\test_numbers.txt .
echo test_numbers.txt | .\parent.exe
```

### child.exe –Ω–µ –Ω–∞–π–¥–µ–Ω

```powershell
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
cd D:\programming_projects\mai_os\lab3\build\src
dir  # –î–æ–ª–∂–Ω—ã –±—ã—Ç—å parent.exe –∏ child.exe
```

### –§–∞–π–ª test_numbers.txt –Ω–µ –Ω–∞–π–¥–µ–Ω

```powershell
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É—é
copy D:\programming_projects\mai_os\lab3\test_numbers.txt .
```

## –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [README.md](README.md) ‚Äî –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
- [BUILD.md](BUILD.md) ‚Äî –¥–µ—Ç–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Å–±–æ—Ä–∫–µ

## –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ Lab3?

**Lab3 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç file mapping –∏ events –≤–º–µ—Å—Ç–æ pipes:**

| Lab1 (Pipes) | Lab3 (File Mapping) |
|-------------|---------------------|
| CreatePipe() | CreateFileMapping() |
| ReadFile/WriteFile | MapViewOfFile() + –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø |
| –ë–ª–æ–∫–∏—Ä—É—é—â–µ–µ —á—Ç–µ–Ω–∏–µ | Events –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ |
| –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ file mapping:**
- ‚ö° –ë—ã—Å—Ç—Ä–µ–µ (–Ω–µ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö)
- üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º
- üîÑ –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–∞–º—è—Ç–∏

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- üîí –¢—Ä–µ–±—É–µ—Ç —è–≤–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (Events)
- üß© –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- üìè –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä shared memory

